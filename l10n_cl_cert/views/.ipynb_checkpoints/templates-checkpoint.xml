<?xml version="1.0" encoding="ISO-8859-1"?>
<odoo>
    <data>
        <template id="envio_dte_cert">
<EnvioDTE xmlns="http://www.sii.cl/SiiDte" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sii.cl/SiiDte EnvioDTE_v10.xsd" version="1.0">
    <SetDTE ID="SetDoc">
        <Caratula version="1.0">
            <RutEmisor t-esc="RutEmisor"/>
            <RutEnvia t-esc="RutEnvia"/>
            <RutReceptor t-esc="RutReceptor"/>
            <FchResol t-esc="FchResol"/>
            <NroResol t-esc="NroResol"/>
            <TmstFirmaEnv t-esc="TmstFirmaEnv"/>
            <SubTotDTE t-foreach="tipodte_subtotals" t-as="subtotal">
                <TpoDTE>
                    <t t-esc="subtotal['code']"/>
                </TpoDTE>
                <NroDTE>
                    <t t-esc="subtotal['count']"/>
                </NroDTE>
            </SubTotDTE>
        </Caratula>
                <t t-foreach="dtes" t-as="dte">
        <t t-esc="dte"/>
                </t>
    </SetDTE>
</EnvioDTE>
        </template>
        <template name="DTE Certification" inherit_id="l10n_cl_edi.dte_subtemplate">
            <xpath expr="//t[@t-as='reference_id']" position="replace">
        <t t-as="reference_id" t-foreach="move.l10n_cl_reference_ids.sorted(key=lambda r: r.date)">
            <Referencia>
                <NroLinRef t-esc="reference_number"/>
                <TpoDocRef t-esc="reference_id.l10n_cl_reference_doc_type_selection"/>
                <FolioRef t-esc="reference_id.origin_doc_number"/>
                <FchRef t-esc="reference_id.date"/>
                <CodRef t-esc="reference_id.reference_doc_code"/>
                <RazonRef t-esc="reference_id.reason"/>
            </Referencia>
            <t t-set="reference_number" t-value="reference_number + 1"/>
        </t>
            </xpath>
        </template>
<!--
        <template id="listing">
          <ul>
            <li t-foreach="objects" t-as="object">
              <a t-attf-href="#{ root }/objects/#{ object.id }">
                <t t-esc="object.display_name"/>
              </a>
            </li>
          </ul>
        </template>
        <template id="object">
          <h1><t t-esc="object.display_name"/></h1>
          <dl>
            <t t-foreach="object._fields" t-as="field">
              <dt><t t-esc="field"/></dt>
              <dd><t t-esc="object[field]"/></dd>
            </t>
          </dl>
        </template>
-->
    </data>
</odoo>